\usepackage{booktabs}
\usepackage[section]{placeins}
\usepackage{longtable}
\usepackage{chngcntr}
\usepackage{adjustbox}
\usepackage{etoolbox}
\usepackage{setspace}
\usepackage{sectsty}
\usepackage{tocloft}
\usepackage{underscore}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage{bookmark}

% general formatting
\geometry{letterpaper, left=40mm, right=25mm, top=25mm, bottom=25mm}
\doublespacing

% formatting for chapter and section titles
\titleformat{\chapter}
  {\filcenter\Large\bfseries\uppercase}
  {\thechapter}{1em}{}
\titlespacing{\chapter}
  {5pc}{*0}{*2}[5pc]
\titleformat{\section}
  {\large\bfseries}
  {\thesection}{1em}{}
\renewcommand{\chaptermark}[1]{%
  \markboth{#1}{}}
\renewcommand{\headrulewidth}{0pt}

% formatting header and footer
\fancypagestyle{plain}{%
  \fancyhf{} %
  \fancyfoot[C]{\thepage} %
}
\fancypagestyle{rightpageno}{%
  \fancyhf{} %
  \fancyhead[R]{\thepage} %
}
\pagestyle{rightpageno}

% formatting TOC etc.
\renewcommand{\cfttoctitlefont}{\Large\bfseries}
\renewcommand{\contentsname}{TABLE OF CONTENTS}
\renewcommand{\cftaftertoctitle}{}
\setlength{\cftbeforetoctitleskip}{0pt}
\setlength{\cftaftertoctitleskip}{0pt}
\renewcommand{\listfigurename}{LIST OF FIGURES}
\renewcommand{\cftloftitlefont}{\Large\bfseries}
\renewcommand{\cftafterloftitle}{}
\setlength{\cftbeforeloftitleskip}{0pt}
\setlength{\cftafterloftitleskip}{0pt}
\renewcommand{\listtablename}{LIST OF TABLES}
\renewcommand{\cftlottitlefont}{\Large\bfseries}
\renewcommand{\cftafterlottitle}{}
\setlength{\cftbeforelottitleskip}{0pt}
\setlength{\cftafterlottitleskip}{0pt}

% automatically resize width of tables that exceed document width
\newsavebox{\mybox}
\newenvironment{mytabularwrap}{\begin{lrbox}{\mybox}}
  {\end{lrbox}%
  \setbox0\hbox{\usebox\mybox}%
  \ifdim\wd0<\textwidth
      \usebox\mybox%
  \else
      \resizebox{\textwidth}{!}{\usebox\mybox}%
  \fi
  }
\BeforeBeginEnvironment{tabular}{\begin{mytabularwrap}}
\AfterEndEnvironment{tabular}{\end{mytabularwrap}}

\counterwithin{figure}{chapter}
\counterwithin{table}{chapter}
\counterwithout{equation}{chapter}